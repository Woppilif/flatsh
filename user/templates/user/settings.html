{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}


{% block content %}
<div class="container">
  <div class="row justify-content-center">
  
    <div class="col-xl-12 col-lg-6 col-md-6">
  <div class="card o-hidden border-0 shadow-lg my-5">
    <div class="card-body p-0">
      <!-- Nested Row within Card Body -->
      <div class="row">
        <div class="col-lg-12">
          <div class="p-5">
            <div class="text-center">
              <h1 class="h4 text-gray-900 mb-4">Настройки учётной записи</h1>
            </div>
            <form method="post" action="{% url 'user:settings' %}" enctype='multipart/form-data'>
              {% csrf_token %}
              {% for field in form %}
                <div class="form-group{% if field.errors %} has-error{% endif %}">
                  <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                  {% render_field field class="form-control" %}
                  {% for error in field.errors %}
                    <p class="help-block">{{ error }}</p>
                  {% endfor %}
                </div>
              {% endfor %}
              <button class="btn btn-lg btn-primary btn-block" type="submit">Сохранить</button>
              </form>
            <div class="text-center">
                <h1 class="h4 text-gray-900 mb-4">Последние транзакции</h1>
            </div>
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">Аренда</th>
                    <th scope="col">Стоимость и статус</th>
                    <th scope="col">Тип</th>
                    </tr>
                </thead>
                <tbody>
                {%for item in payments%}
                    <tr>
                    <th scope="row">{{item.id}}</th>
                    <td>{{item.renta}}</td>
                    <td>{{item.price}} \ {{item.status}}</td>
                    <td>{{item.payment_type}}</td>
                    </tr>
                {%endfor%}
                </tbody>
            </table>
            <div class="text-center">
                <h1 class="h4 text-gray-900 mb-4">Последние аренды</h1>
            </div>
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">Адрес</th>
                    <th scope="col">Даты</th>
                    <th scope="col">Статус</th>
                    </tr>
                </thead>
                <tbody>
                {%for item in rents%}
                    <tr>
                    <th scope="row">{{item.id}}</th>
                    <td>{{item.flat}}</td>
                    <td>{{item.start}} \ {{item.end}}</td>
                    <td>{{item.status}}</td>
                    </tr>
                {%endfor%}
                </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>
  
  
  </div>


{% endblock %}